# Итоговое SF (сервер 1)

Здесь описано решение пункта итогового задания SF:
"Перенесите zabbix-server в Docker, то же самое сделайте с ELK и Grafana."

### Состав сборки

1. `mysql-server` - БД для работы Zabbix-сервера
2. `zabbix-server-mysql` - Zabbix-сервер
3. `zabbix-web-nginx-mysql` - веб-интерфейс Zabbix-сервера
4. `zabbix-java-gateway` - Java-gateway Zabbix-сервера
5. `grafana` - Grafana

### Особенности сборки

1. Сборка основана на версии Zabbix 6.2. Это связано с ошибками соеднинения с БД при установке последней версии 6.4.
   Возможно, будет работать версия 6.4.1, но это не тестировалось. Ошибки есть как с MySQL, так и с PostgreSQL.
2. Вместе с Grafana инсталлируется плагин для сбора данных из Zabbix-сервера. Однако его необходимо
   включить вручную и настроить на соединение с Zabbix:
   - URL: `http://zabbix-web:8080/api_jsonrpc.php`
   - логин: `Admin` или пользовательский
   - пароль: `zabbix` или пользовательский
3. Том `grafana_data` используется для сохранения настроек Grafana, в том числе созданных дашбордов.
4. Zabbix-agent устанавливается на хост, то есть мониторит сам сервер, а не докер-контейнер.
   Для этого нужно будет подключить его к Zabbix-серверу:
   - Адрес Zabbix-agent в настройках Zabbix будет аналогично такому `172.23.0.1`
   - Адрес Zabbix-сервера в настройках zabbix-agent будет аналогичен `172.23.0.5`
   В обоих случаях необходимо узнать адреса вашей сети докер-контейнеров (`docker container inspect...`)
5. Zabbix-agent'ы других хостов подключаются как обычно (по внутренним или внешним ip)

### TODOs

1. Нужно убрать переменные окружения в `.env`